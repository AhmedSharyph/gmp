<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Child Nutrition & Growth Monitoring Assessment Tool</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-800">
  <div class="max-w-5xl mx-auto p-6">
    <header class="mb-6">
      <h1 class="text-2xl font-semibold">üßí Child Nutrition & Growth Monitoring Assessment Tool</h1>
      <p class="text-sm text-slate-500 mt-1">Fill the form below ‚Äî contact: Shahula Ahmed, UNICEF ‚Äî 7906977 ‚Äî asahmed@unicef.org</p>
    </header>

    <form id="assessmentForm" class="space-y-6 bg-white p-6 rounded-2xl shadow">

      <!-- A. Facility Information -->
      <section class="space-y-4">
        <h2 class="text-lg font-medium">A. üìç Facility Information</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium">1. Name of Island and Public Health Unit</label>
            <input name="island" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm focus:ring-2 focus:ring-sky-300" required />
          </div>
          <div>
            <label class="block text-sm font-medium">2. Atoll</label>
            <input name="atoll" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm focus:ring-2 focus:ring-sky-300" required />
          </div>
        </div>

        <fieldset class="border border-gray-100 rounded-md p-4">
          <legend class="text-sm font-semibold">3. Who conducts GMP?</legend>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mt-2">
            <div>
              <label class="text-sm">a. Staff Name</label>
              <input name="staffName" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
            </div>
            <div>
              <label class="text-sm">b. Title</label>
              <input name="staffTitle" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
            </div>
            <div>
              <label class="text-sm">c. Contact</label>
              <input name="staffContact" type="tel" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
            </div>
          </div>

          <div class="mt-3">
            <label class="text-sm font-medium">d. Training in IYCF or GMP</label>
            <div class="mt-1 flex gap-4 items-center">
              <label class="inline-flex items-center"><input type="radio" name="training" value="Yes" checked class="mr-2">Yes</label>
              <label class="inline-flex items-center"><input type="radio" name="training" value="No" class="mr-2">No</label>
            </div>
          </div>

          <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-3">
            <div>
              <label class="text-sm">4. How many children under five?</label>
              <input name="childrenUnder5" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
            </div>
            <div>
              <label class="text-sm">5. How many children under 2?</label>
              <input name="childrenUnder2" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
            </div>
            <div>
              <label class="text-sm">6. How many children under 2 years attending regular GMP?</label>
              <input name="under2Regular" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
            </div>
          </div>
        </fieldset>
      </section>

      <!-- 2. Prevalence Data -->
      <section class="space-y-4">
        <h2 class="text-lg font-medium">2. üìä Child Nutrition Prevalence Data</h2>

        <div>
          <label class="text-sm">2.1 How many children under 5 attending regular GMP?</label>
          <input name="attendingUnder5" type="number" min="0" class="mt-1 block w-48 rounded-md border-gray-200 shadow-sm" />
        </div>

        <p class="text-sm text-slate-500">2.2 Among children under 5 years screened in the selected month (e.g. July 2025):</p>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
          <div class="p-3 border rounded-md bg-slate-50">
            <label class="text-sm">Underweight</label>
            <input name="u_underweight" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
          </div>
          <div class="p-3 border rounded-md bg-slate-50">
            <label class="text-sm">Stunted</label>
            <input name="u_stunted" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
          </div>
          <div class="p-3 border rounded-md bg-slate-50">
            <label class="text-sm">Wasted</label>
            <input name="u_wasted" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
          </div>
          <div class="p-3 border rounded-md bg-slate-50">
            <label class="text-sm">Overweight</label>
            <input name="u_overweight" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
          </div>
          <div class="p-3 border rounded-md bg-slate-50">
            <label class="text-sm">Obesity</label>
            <input name="u_obesity" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
          </div>
        </div>

        <hr class="my-4" />

        <div>
          <label class="text-sm">2.3 How many children under 2 attending GMP / screened regular?</label>
          <input name="attendingUnder2" type="number" min="0" class="mt-1 block w-48 rounded-md border-gray-200 shadow-sm" />
        </div>

        <p class="text-sm text-slate-500">Among children under 2 screened in the selected month:</p>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
          <div class="p-3 border rounded-md bg-slate-50">
            <label class="text-sm">Underweight (Under 2)</label>
            <input name="t_underweight" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
          </div>
          <div class="p-3 border rounded-md bg-slate-50">
            <label class="text-sm">Stunted (Under 2)</label>
            <input name="t_stunted" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
          </div>
          <div class="p-3 border rounded-md bg-slate-50">
            <label class="text-sm">Wasted (Under 2)</label>
            <input name="t_wasted" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
          </div>
          <div class="p-3 border rounded-md bg-slate-50">
            <label class="text-sm">Overweight (Under 2)</label>
            <input name="t_overweight" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
          </div>
          <div class="p-3 border rounded-md bg-slate-50">
            <label class="text-sm">Obesity (Under 2)</label>
            <input name="t_obesity" type="number" min="0" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" />
          </div>
        </div>

        <details class="mt-3 p-3 border rounded-md bg-white">
          <summary class="font-medium">Growth condition definitions (Z-score cut-offs)</summary>
          <div class="mt-3 overflow-auto">
            <table class="w-full text-sm table-auto border-collapse">
              <thead>
                <tr class="bg-slate-100"><th class="p-2 border">Condition</th><th class="p-2 border">Indicator</th><th class="p-2 border">Z-Score Cut-Off</th><th class="p-2 border">Definition</th></tr>
              </thead>
              <tbody>
                <tr><td class="p-2 border">Stunting</td><td class="p-2 border">Height-for-age (HAZ)</td><td class="p-2 border">&lt; -2 SD</td><td class="p-2 border">Child is too short for age due to chronic malnutrition</td></tr>
                <tr><td class="p-2 border">Wasting</td><td class="p-2 border">Weight-for-height (WHZ)</td><td class="p-2 border">&lt; -2 SD</td><td class="p-2 border">Child is too thin for height due to acute malnutrition</td></tr>
                <tr><td class="p-2 border">Underweight</td><td class="p-2 border">Weight-for-age (WAZ)</td><td class="p-2 border">&lt; -2 SD</td><td class="p-2 border">Child has low weight for age</td></tr>
                <tr><td class="p-2 border">Overweight</td><td class="p-2 border">Weight-for-height (WHZ)</td><td class="p-2 border">&gt; +2 SD and ‚â§ +3 SD</td><td class="p-2 border">Child has excess weight for height</td></tr>
                <tr><td class="p-2 border">Obesity</td><td class="p-2 border">BMI-for-age (BMIZ)</td><td class="p-2 border">&gt; +3 SD</td><td class="p-2 border">Child has significantly high body mass for age</td></tr>
              </tbody>
            </table>
          </div>
        </details>
      </section>

      <!-- 3. Growth Monitoring Practices -->
      <section class="space-y-4">
        <h2 class="text-lg font-medium">3. üìè Growth Monitoring Practices</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="text-sm">3.1 Is growth monitoring routinely conducted?</label>
            <div class="mt-1 flex gap-4"><label class="inline-flex items-center"><input type="radio" name="gmproutine" value="Yes" checked class="mr-2">Yes</label><label class="inline-flex items-center"><input type="radio" name="gmproutine" value="No" class="mr-2">No</label></div>
          </div>

          <div>
            <label class="text-sm">3.2 Is the developmental tracking done on the book?</label>
            <div class="mt-1 flex gap-4"><label class="inline-flex items-center"><input type="radio" name="devbook" value="Yes" checked class="mr-2">Yes</label><label class="inline-flex items-center"><input type="radio" name="devbook" value="No" class="mr-2">No</label></div>
          </div>

          <div>
            <label class="text-sm">3.2 Does the facility enter the Child development tracking to the DHIS2 module?</label>
            <div class="mt-1 flex gap-4"><label class="inline-flex items-center"><input type="radio" name="dhis2" value="Yes" checked class="mr-2">Yes</label><label class="inline-flex items-center"><input type="radio" name="dhis2" value="No" class="mr-2">No</label></div>
          </div>

          <div>
            <label class="text-sm">3.3 Is nutrition counseling or IYCF provided during visits?</label>
            <div class="mt-1 flex gap-4"><label class="inline-flex items-center"><input type="radio" name="iycf" value="Yes" checked class="mr-2" onchange="toggleCounselTopics()">Yes</label><label class="inline-flex items-center"><input type="radio" name="iycf" value="No" class="mr-2" onchange="toggleCounselTopics()">No</label></div>
          </div>
        </div>

        <div id="counselTopics" class="mt-3">
          <label class="text-sm font-medium">3.4 If yes, what are the topics? (tick all that apply)</label>
          <div class="mt-2 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2">
            <label class="inline-flex items-center"><input type="checkbox" name="topics" value="Exclusive Breast feeding" class="mr-2">Exclusive Breast feeding</label>
            <label class="inline-flex items-center"><input type="checkbox" name="topics" value="Complementary feeding" class="mr-2">Complementary feeding</label>
            <label class="inline-flex items-center"><input type="checkbox" name="topics" value="Responsive Feeding" class="mr-2">Responsive Feeding</label>
            <label class="inline-flex items-center"><input type="checkbox" name="topics" value="Feeding during illness" class="mr-2">Feeding during illness</label>
            <label class="inline-flex items-center"><input type="checkbox" name="topics" value="Fussy eating/not eating" class="mr-2">Fussy eating / not eating</label>
            <label class="inline-flex items-center"><input type="checkbox" name="topics" value="Feeding when growth is faltering" class="mr-2">Feeding when growth is faltering</label>
            <label class="inline-flex items-center"><input type="checkbox" name="topics" value="Feeding practices for children who are overweight" class="mr-2">Feeding practices for children who are overweight</label>
          </div>
        </div>

        <div class="mt-3">
          <label class="text-sm">3.5 Any child identified with delays this year?</label>
          <div class="mt-1 flex gap-4"><label class="inline-flex items-center"><input type="radio" name="delays" value="Yes" class="mr-2" onchange="toggleDelayAdvice()">Yes</label><label class="inline-flex items-center"><input type="radio" name="delays" value="No" checked class="mr-2" onchange="toggleDelayAdvice()">No</label></div>

          <div id="delayAdvice" class="mt-2 hidden">
            <label class="text-sm">3.5.1 If so, what do you, health worker say or tell the parent?</label>
            <textarea name="delayAdviceText" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm" rows="3"></textarea>
          </div>
        </div>

        <div class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="text-sm">3.6 Are growth charts properly filled and interpreted?</label>
            <div class="mt-1 flex gap-4"><label class="inline-flex items-center"><input type="radio" name="chartsOK" value="Yes" checked class="mr-2">Yes</label><label class="inline-flex items-center"><input type="radio" name="chartsOK" value="No" class="mr-2">No</label></div>
          </div>

          <div>
            <label class="text-sm">3.7 Was any group sessions held to parents this year?</label>
            <div class="mt-1 flex gap-4"><label class="inline-flex items-center"><input type="radio" name="groupSessions" value="Yes" class="mr-2" onchange="toggleSessionCount()">Yes</label><label class="inline-flex items-center"><input type="radio" name="groupSessions" value="No" checked class="mr-2" onchange="toggleSessionCount()">No</label></div>

            <div id="sessionCount" class="mt-2 hidden">
              <label class="text-sm">3.7.1 How many sessions?</label>
              <input name="sessionNumber" type="number" min="0" class="mt-1 block w-36 rounded-md border-gray-200 shadow-sm" />
            </div>
          </div>
        </div>
      </section>

      <!-- 4. Other programs -->
      <section class="space-y-4">
        <h2 class="text-lg font-medium">4. üõ†Ô∏è Other ‚Äì All public health programs and events</h2>

        <div>
          <label class="text-sm">4.1 What are key issues affecting adolescents and young people‚Äôs health in the island? (select more than one if applicable)</label>
          <div class="mt-2 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2">
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Unhealthy diet" class="mr-2">Unhealthy diet</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Skipping meals" class="mr-2">Skipping meals</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Eating soft drinks & energy drinks" class="mr-2">Eating soft drinks & energy drinks</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Mental health problems (not illness)" class="mr-2">Mental health problems (not illness)</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Mental health illness" class="mr-2">Mental health illness</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Diabetes" class="mr-2">Diabetes</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Cancer" class="mr-2">Cancer</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Other NCDs" class="mr-2">Other NCDs</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Not active" class="mr-2">Not active</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Smoking & vaping" class="mr-2">Smoking & vaping</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Drugs" class="mr-2">Drugs</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Unwanted pregnancies" class="mr-2">Unwanted pregnancies</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="Disabilities" class="mr-2">Disabilities</label>
            <label class="inline-flex items-center"><input type="checkbox" name="issues" value="High Screen time" class="mr-2">High Screen time</label>
          </div>
        </div>

        <div>
          <label class="text-sm">4.2 What prevention activities do you conduct?</label>
          <textarea name="preventionActivities" rows="3" class="mt-1 block w-full rounded-md border-gray-200 shadow-sm"></textarea>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="text-sm">4.3 Do you conduct health promotion, Community engagement or outreach activities?</label>
            <div class="mt-1 flex gap-4"><label class="inline-flex items-center"><input type="radio" name="outreach" value="Yes" checked class="mr-2">Yes</label><label class="inline-flex items-center"><input type="radio" name="outreach" value="No" class="mr-2">No</label></div>
          </div>

          <div>
            <label class="text-sm">4.4 How many was conducted this year?</label>
            <input name="outreachCount" type="number" min="0" class="mt-1 block w-36 rounded-md border-gray-200 shadow-sm" />
          </div>
        </div>
      </section>

      <div class="flex items-center justify-between">
        <p class="text-sm text-slate-500">For information, contact: Shahula Ahmed, UNICEF ‚Äî 7906977 ‚Äî asahmed@unicef.org</p>
        <div class="flex gap-2">
          <button type="button" onclick="resetForm()" class="px-4 py-2 rounded-md bg-slate-100 text-slate-700">Reset</button>
          <button type="submit" class="px-4 py-2 rounded-md bg-sky-600 text-white">Submit</button>
        </div>
      </div>

    </form>
  </div>

  <script>
    // Put your Web App URL here (Apps Script doPost URL)
    const SCRIPT_URL = "PASTE_YOUR_WEB_APP_URL_HERE";

    function toggleCounselTopics(){
      const yes = document.querySelector('input[name="iycf"][value="Yes"]').checked;
      document.getElementById('counselTopics').style.display = yes ? 'block' : 'none';
    }
    function toggleDelayAdvice(){
      const yes = document.querySelector('input[name="delays"][value="Yes"]').checked;
      document.getElementById('delayAdvice').classList.toggle('hidden', !yes);
    }
    function toggleSessionCount(){
      const yes = document.querySelector('input[name="groupSessions"][value="Yes"]').checked;
      document.getElementById('sessionCount').classList.toggle('hidden', !yes);
    }

    document.getElementById('assessmentForm').addEventListener('submit', handleSubmit);

    function handleSubmit(e){
      e.preventDefault();
      const form = e.target;
      const fd = new FormData(form);
      const obj = {};
      fd.forEach((v,k)=>{
        if (obj[k]) {
          obj[k] = [].concat(obj[k], v);
        } else obj[k] = v;
      });
      // make sure checkbox groups captured properly
      ['topics','issues'].forEach(name=>{
        const els = Array.from(document.querySelectorAll('input[name="'+name+'"]:checked'));
        if (els.length) obj[name] = els.map(i=>i.value);
      });

      if (!SCRIPT_URL || SCRIPT_URL.includes('PASTE_YOUR')) {
        // fallback: show JSON for download
        const json = JSON.stringify(obj, null, 2);
        const w = window.open('', '_blank');
        w.document.write('<pre>'+escapeHtml(json)+'</pre>');
        return;
      }

      fetch(SCRIPT_URL, {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(obj)
      }).then(r=>r.json()).then(res=>{
        if (res.status === 'success'){
          alert('‚úÖ Data submitted successfully');
          form.reset(); toggleCounselTopics(); toggleDelayAdvice(); toggleSessionCount();
        } else {
          alert('Submission error: '+(res.message||JSON.stringify(res)));
        }
      }).catch(err=>{
        alert('Network error: '+err.message);
      });
    }

    function resetForm(){ if(confirm('Reset form?')){ document.getElementById('assessmentForm').reset(); toggleCounselTopics(); toggleDelayAdvice(); toggleSessionCount(); }}
    function escapeHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    // init
    toggleCounselTopics(); toggleDelayAdvice(); toggleSessionCount();
  </script>
</body>
</html>
